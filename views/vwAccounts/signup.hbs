{{#section 'css'}}
<style>
    /* --- GIỮ NGUYÊN CSS CŨ --- */
    .signup-wrapper {
        min-height: 100vh;
        width: 100%;
        background: url('https://images.unsplash.com/photo-1587300003388-59208cc962cb?q=80&w=2070&auto=format&fit=crop') no-repeat center center;
        background-size: cover;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 0;
    }

    .signup-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(8px);
        z-index: 1;
    }

    .signup-card {
        position: relative;
        z-index: 2;
        width: 100%;
        max-width: 550px;
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        padding: 2.5rem;
    }

    .brand-icon-container {
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
    }

    /* Input Styles */
    .form-floating>.form-control,
    .form-floating>.form-select {
        border-radius: 12px;
        border: 2px solid #e9ecef;
    }

    .form-floating>.form-control:focus,
    .form-floating>.form-select:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
    }

    .btn-signup {
        border-radius: 50px;
        padding: 12px;
        font-weight: 700;
        font-size: 1.1rem;
        background: linear-gradient(90deg, #0d6efd, #0a58ca);
        border: none;
        box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        transition: all 0.2s;
    }

    .btn-signup:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(13, 110, 253, 0.4);
    }

    .back-home {
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 3;
        font-weight: 600;
        color: #495057;
        text-decoration: none;
        background: rgba(255, 255, 255, 0.8);
        padding: 8px 16px;
        border-radius: 30px;
    }

    .back-home:hover {
        background: white;
        color: #0d6efd;
    }

    @media (max-width: 576px) {
        .signup-card {
            margin: 15px;
            padding: 1.5rem;
        }
    }
</style>
{{/section}}

<div class="signup-wrapper">
    <div class="signup-overlay"></div>

    <a href="/" class="back-home">
        <i class="fas fa-arrow-left me-2"></i>Trang chủ
    </a>

    <div class="signup-card">

        <div class="text-center mb-4">
            <div class="brand-icon-container">
                <i class="fas fa-user-plus fa-2x"></i>
            </div>
            <h3 class="fw-bold text-dark mb-1">Tạo tài khoản mới</h3>
            <p class="text-muted small">Điền thông tin để tham gia PetCareX</p>
        </div>

        <form method="POST" id="formRegister">

            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="txtUsername" name="username" placeholder="Username" required
                    autofocus>
                <label for="txtUsername">Tên đăng nhập</label>
            </div>

            <div class="row g-2 mb-3">
                <div class="col-md-8">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="txtName" name="name" placeholder="Full Name"
                            required>
                        <label for="txtName">Họ và tên</label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">
                        <select class="form-select" id="selGender" name="gender" required>
                            <option value="" selected disabled>Chọn...</option>
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                        </select>
                        <label for="selGender">Giới tính</label>
                    </div>
                </div>
            </div>

            <div class="row g-2 mb-3">
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="date" class="form-control" id="txtDOB" name="dob" required>
                        <label for="txtDOB">Ngày sinh</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="tel" class="form-control" id="txtPhone" name="phone" placeholder="Phone" required>
                        <label for="txtPhone">Số điện thoại</label>
                    </div>
                </div>
            </div>

            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="txtEmail" name="email" placeholder="Email" required>
                <label for="txtEmail">Địa chỉ Email</label>
            </div>

            <div class="row g-2 mb-3">
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="password" class="form-control" id="txtPassword" name="password" placeholder="Pass"
                            required>
                        <label for="txtPassword">Mật khẩu</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="password" class="form-control" id="txtConfirm" name="confirm_password"
                            placeholder="Confirm" required>
                        <label for="txtConfirm">Nhập lại mật khẩu</label>
                    </div>
                </div>
            </div>

            <div id="passwordError" class="text-danger small mb-4" style="display: none;">
                <i class="fas fa-exclamation-triangle me-1"></i> Mật khẩu nhập lại không khớp!
            </div>

            <div class="d-grid mb-4">
                <button type="submit" class="btn btn-primary btn-signup text-white">
                    <i class="fas fa-check-circle me-2"></i>Đăng ký tài khoản
                </button>
            </div>

            <div class="text-center">
                <span class="text-muted small">Đã có tài khoản?</span>
                <a href="/signin" class="text-decoration-none fw-bold text-primary ms-1">Đăng nhập ngay</a>
            </div>

        </form>
    </div>
</div>

{{#section 'js'}}
<script>
    const backendError = "{{error}}";
    if (backendError) {
        Swal.fire({
            icon: 'error',
            title: 'Không thể đăng ký',
            text: backendError,
            confirmButtonColor: '#0d6efd'
        });
    }

    document.getElementById('formRegister').addEventListener('submit', function (e) {
        const pass = document.getElementById('txtPassword').value;
        const confirm = document.getElementById('txtConfirm').value;

        if (pass !== confirm) {
            e.preventDefault();

            Swal.fire({
                icon: 'warning',
                title: 'Mật khẩu không khớp',
                text: 'Vui lòng kiểm tra lại mật khẩu xác nhận!',
                confirmButtonColor: '#ffc107'
            }).then(() => {
                document.getElementById('txtConfirm').focus();
            });
        }
    });
</script>
{{/section}}